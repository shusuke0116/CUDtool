<!Doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="/public/js/func.js"></script>
  <script src="/public/js/3a.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1"></script>
  <title>CUD学習ツール</title>
</head>
<body>
  <p>3部：グラフ[ 1.配色 → 2.色以外での区別 → 3.項目名の書き方 ]</p>
  <hr>
  <h2>1. 配色</h2>
  <hr>
  <form action="/question/7/answer" method="post">
  <div id="que">
    <p>que</p>
  </div>
  <div id="cho">
    <p>線１
    <% let d; 
      for (let row of choices){ 
        if(row.ccode == col[0][0]) d = "checked";
        else d = ""; %>
      <font color="<%= '#' + row.ccode %>">
        <input type="radio" id="s0" name="s0" value="<%= row.ccode %>" <%= d %>><%= row.name %>
      </font>
    <% } %>
    </p>
    <p>線２
    <% let a; 
      for (let row of choices){ 
        if(row.ccode == col[1][0]) a = "checked";
        else a = ""; %>
      <font color="<%= '#' + row.ccode %>">
        <input type="radio" id="s1" name="s1" value="<%= row.ccode %>" <%= a %>><%= row.name %>
      </font>
    <% } %>
    </p>
    <p>線３
    <% let b; 
      for (let row of choices){ 
        if(row.ccode == col[2][0]) b = "checked";
        else b = ""; %>
      <font color="<%= '#' + row.ccode %>">
        <input type="radio" id="s2" name="s2" value="<%= row.ccode %>" <%= b %>><%= row.name %>
      </font>
    <% } %>
    </p>
    <p>線４
    <% let c; 
      for (let row of choices){ 
        if(row.ccode == col[3][0]) c = "checked";
        else c = ""; %>
      <font color="<%= '#' + row.ccode %>">
        <input type="radio" id="s3" name="s3" value="<%= row.ccode %>" <%= c %>><%= row.name %>
      </font>
    <% } %>
  </div>
  <div id="graph">
    <canvas id="graph1" width="500" height="300">
    <input type="hidden" name="a0s0" value="<%= col[0][0] %>">
    <input type="hidden" name="a0s1" value="<%= col[1][0] %>">
    <input type="hidden" name="a0s2" value="<%= col[2][0] %>">
    <input type="hidden" name="a0s3" value="<%= col[3][0] %>">
  </div>
  <div id="button">
    <p><input type="submit" value="評価" class="button"></p>
  </div>
  </form>

  <% if(e == 1){ %>
    <div id="acho">
      選択した色：
      線１：<%= col[0][4] %>、
      線２：<%= col[1][4] %>、
      線３：<%= col[2][4] %>、
      線４：<%= col[3][4] %>
    </div>
    <div id="ano">
      ＜別色覚視点＞<br>
      <div id="sim">
        通常：<canvas id="a0" width="500" height="300"></canvas>
        P型：<canvas id="a1" width="500" height="300"></canvas>
        D型：<canvas id="a2" width="500" height="300"></canvas>
        S型：<canvas id="a3" width="500" height="300"></canvas>
        <input type="hidden" name="a0s0" value="<%= col[0][0] %>">
        <input type="hidden" name="a0s1" value="<%= col[1][0] %>">
        <input type="hidden" name="a0s2" value="<%= col[2][0] %>">
        <input type="hidden" name="a0s3" value="<%= col[3][0] %>">
        <input type="hidden" name="a1s0" value="<%= col[0][1] %>">
        <input type="hidden" name="a1s1" value="<%= col[1][1] %>">
        <input type="hidden" name="a1s2" value="<%= col[2][1] %>">
        <input type="hidden" name="a1s3" value="<%= col[3][1] %>">
        <input type="hidden" name="a2s0" value="<%= col[0][2] %>">
        <input type="hidden" name="a2s1" value="<%= col[1][2] %>">
        <input type="hidden" name="a2s2" value="<%= col[2][2] %>">
        <input type="hidden" name="a2s3" value="<%= col[3][2] %>">
        <input type="hidden" name="a3s0" value="<%= col[0][3] %>">
        <input type="hidden" name="a3s1" value="<%= col[1][3] %>">
        <input type="hidden" name="a3s2" value="<%= col[2][3] %>">
        <input type="hidden" name="a3s3" value="<%= col[3][3] %>">
      </div>
    </div>
    <div id="eva">
      <% if(gb == 0) { %> 
        <p><%= textdata[0].bad %></p>
        <p>ポイント：<%= textdata[0].adv %></p>
        <p>別の選択肢を選んでください</p>
      <% }else{ %> 
        <p><%= textdata[0].good %></p>  
        <p>ポイント：<%= textdata[0].adv %></p>
        <hr>
        <p><a href="<%= '/question/' + (parseInt(textdata[0].id)+1) + '/' + col[0] %>">次の項目へ</a></p>
      <% } %>
    </div>
  <% } %>
      
</body>
</html>